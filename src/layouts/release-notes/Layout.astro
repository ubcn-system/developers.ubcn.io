---
import Footer from '../../components/Footer.astro';
const {frontmatter} = Astro.props;
const classList = `mt-4 mb-6 text-xl text-gray`;
---
<html>
<head>
    <title>릴리즈노트</title>
    <script>
        const today = new Date();
        today.setHours(0, 0, 0, 0); // 시간 제거

        const threeDaysAgo = new Date(today);
        threeDaysAgo.setDate(today.getDate() - 3);

        const sidebarContents = document.querySelectorAll(".sidebar-content .top-level li span");

        for (let i = 0; i < sidebarContents.length; i++) {
            const text = sidebarContents[i].innerText.trim();

            // 문자열에서 yyyy-MM-dd 형식 날짜 추출
            const match = text.match(/\d{4}-\d{2}-\d{2}/);
            if (!match) continue;

            const [year, month, day] = match[0].split('-').map(Number);
            const itemDate = new Date(year, month - 1, day);
            itemDate.setHours(0, 0, 0, 0);

            if (itemDate >= threeDaysAgo && itemDate <= today) {
                sidebarContents[i].innerHTML += ' <span class="new-badge">NEW</span>';
            }
        }
    </script>
</head>
<body>
<div class={classList}>
    <div class="relative">
        <div>
            <img src="https://developers.ubcn.co.kr/assets/banner_1920x700.png" alt="banner" class="rounded"/>
        </div>
        <div class="hidden md:block absolute bottom-0 pl-4 pb-2 text-white text-4xl font-bold text-center">{frontmatter.title} 소식을 안내드립니다.</div>
    </div>
    <h1 id="주요 업데이트 사항">주요 업데이트 사항</h1>
</div>
<div class="mb-20">
    <slot/>
</div>
<hr>
<Footer/>
</body>
</html>
