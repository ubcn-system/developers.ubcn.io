---
import {type LocalImageProps, Picture} from "astro:assets";

interface Props {
  src: LocalImageProps["src"];
  caption?: string;
  width?: string | number;
  border?: string;
}

const {src, caption, width, border} = Astro.props;
const cls = border == "none"  ? 'my-4 flex flex-col items-center gap-2 not-content' : 'my-4 flex flex-col items-center gap-2';
---
<script>
</script>
<figure class={cls}>
  {
    typeof src === "string" ? (
        <img class="border" src={src} alt={caption} width={width}/>
    ) : (
        <Picture
            src={src}
            alt={caption ?? ""}
            width={typeof width === "number" ? width : Number(width)}
            formats={["webp"]}
        />
    )
  }
  {caption &&
      <figcaption class="text-sm text-slate-5">{caption}</figcaption>}
</figure>
