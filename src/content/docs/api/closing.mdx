---
layout: /src/layouts/api/Layout.astro
title: 마감내역 요청 API
sidebar:
    order: 3
#    badge:
#        text: New
#        variant: tip
description: 마감된 거래와 관련된 API 기능을 제공합니다.
releasedAt: 2024-08-09
writtenAt: 2024-08-09
---

import Button from "/src/components/Button.astro";

발생한 매출에 대해 마감된 정보를 조회할 수 있습니다.\
마감의 종류로는 `수동마감`과 `자동마감` 이 존재합니다.

+ 수동마감
    + 자판기 또는 단말기에서 직접 마감을 진행하는 경우
    + 특정 시간에 마감을 진행하는 경우(예: 17:45:00) - (단말기 펌웨어를 통해 제어)
+ 자동마감
    + 시스템에서 자동으로 마감을 진행하는 경우(23:59:59 고정)
<br/>

```ts

const API = axios.create({
  baseURL: `http://api.ubcn.co.kr/api`,
  headers: {
    "Access-Control-Allow-Origin": "*",
    "company": "{company}",
    "token": "{token}",
  },
});

// get, post 모두 지원합니다.
// 조회일자를 기준으로 마감 정보가 없을 경우, 데이터가 출력되지 않습니다.

// {date}만 작성하는 경우, 해당 날짜의 전체 마감내역을 조회합니다.
// 예시) /20240809 입력 시
// 20240809 일자에 발생한 전체 마감내역을 조회합니다.
const res = await API.get("/closing/{closingType}/{date}");

// {date}와 {time}을 작성하는 경우,
// 해당 날짜의 전일자 {time} 부터 해당 날짜 {time} 까지의 마감내역을 조회합니다.
// 예시) /20240809/180000 입력 시
// 20240808 18시부터 20240809 18시까지의 마감내역을 조회합니다.
const res = await API.get("/closing/{closingType}/{date}/{time}");

// 결과 출력
console.log(res.data);

// 프로세스가 제대로 완료되지 않은 경우 에러 코드가 존재합니다.
if (res.code != null) {
  return alert(res.decription);
}

```
<br/>
## Schema
결과 값에 들어 있는 필드는 다음과 같습니다.
<table>
    <thead>
    <th>필드명</th>
    <th>상세필드명</th>
    <th>타입</th>
    <th>설명</th>
    <th>비고</th>
    </thead>
    <tbody>
    <tr>
        <td>decription</td>
        <td>-</td>
        <td>String</td>
        <td>API 상세설명</td>
        <td>-</td>
    </tr>
    <tr>
        <td>message</td>
        <td>-</td>
        <td>String</td>
        <td>응답 메시지</td>
        <td>-</td>
    </tr>
    <tr>
        <td>type</td>
        <td>-</td>
        <td>String</td>
        <td>API 유형</td>
        <td>-</td>
    </tr>
    <tr>
        <td>closingDate</td>
        <td>-</td>
        <td>String</td>
        <td>요청일자</td>
        <td>YYYYMMDD</td>
    </tr>
    <tr>
        <td rowSpan={27}>salesList</td>
        <td>closingDate</td>
        <td>String</td>
        <td>마감일자</td>
        <td>YYYYMMDD</td>
    </tr>
    <tr>
        <td>terminalID</td>
        <td>String</td>
        <td>단말기 ID</td>
        <td>-</td>
    </tr>
    <tr>
        <td>terminalCode</td>
        <td>String</td>
        <td>단말기코드</td>
        <td>-</td>
    </tr>
    <tr>
        <td>placeCode</td>
        <td>String</td>
        <td>위치코드(점포코드)</td>
        <td>-</td>
    </tr>
    <tr>
        <td>placeNo</td>
        <td>String</td>
        <td>위치순번(POS번호)</td>
        <td>-</td>
    </tr>
    <tr>
        <td>cabNo</td>
        <td>String</td>
        <td>자판기 케비넷번호</td>
        <td>컬럼별 마감 시</td>
    </tr>
    <tr>
        <td>colNo</td>
        <td>String</td>
        <td>자판기 컬럼</td>
        <td>컬럼별 마감 시</td>
    </tr>
    <tr>
        <td>productCode</td>
        <td>String</td>
        <td>상품코드</td>
        <td>상품별 마감 시</td>
    </tr>
    <tr>
        <td>productName</td>
        <td>String</td>
        <td>상품명</td>
        <td>상품별 마감 시</td>
    </tr>
    <tr>
        <td>totCnt</td>
        <td>String</td>
        <td>전체 매출수량</td>
        <td>-</td>
    </tr>
    <tr>
        <td>totAmt</td>
        <td>String</td>
        <td>전체 매출금액</td>
        <td>-</td>
    </tr>
    <tr>
        <td>cashCnt</td>
        <td>String</td>
        <td>현금(영수증) 매출수량</td>
        <td>-</td>
    </tr>
    <tr>
        <td>cashAmt</td>
        <td>String</td>
        <td>현금(영수증) 매출금액</td>
        <td>-</td>
    </tr>
    <tr>
        <td>cardCnt</td>
        <td>String</td>
        <td>신용카드 매출수량</td>
        <td>-</td>
    </tr>
    <tr>
        <td>cardAmt</td>
        <td>String</td>
        <td>신용카드 매출금액</td>
        <td>-</td>
    </tr>
    <tr>
        <td>tmnCnt</td>
        <td>String</td>
        <td>티머니 매출수량</td>
        <td>-</td>
    </tr>
    <tr>
        <td>tmnAmt</td>
        <td>String</td>
        <td>티머니 매출금액</td>
        <td>-</td>
    </tr>
    <tr>
        <td>csbCnt</td>
        <td>String</td>
        <td>캐시비 매출수량</td>
        <td>-</td>
    </tr>
    <tr>
        <td>csbAmt</td>
        <td>String</td>
        <td>캐시비 매출금액</td>
        <td>-</td>
    </tr>
    <tr>
        <td>mybCnt</td>
        <td>String</td>
        <td>마이비 매출수량</td>
        <td>-</td>
    </tr>
    <tr>
        <td>mybAmt</td>
        <td>String</td>
        <td>마이비 매출금액</td>
        <td>-</td>
    </tr>
    <tr>
        <td>krpCnt</td>
        <td>String</td>
        <td>레일플러스 매출수량</td>
        <td>-</td>
    </tr>
    <tr>
        <td>krpAmt</td>
        <td>String</td>
        <td>레일플러스 매출금액</td>
        <td>-</td>
    </tr>
    <tr>
        <td>npcCnt</td>
        <td>String</td>
        <td>페이코 매출수량</td>
        <td>-</td>
    </tr>
    <tr>
        <td>npcAmt</td>
        <td>String</td>
        <td>페이코 매출금액</td>
        <td>-</td>
    </tr>
    <tr>
        <td>kkpCnt</td>
        <td>String</td>
        <td>카카오페이 매출수량</td>
        <td>-</td>
    </tr>
    <tr>
        <td>kkpAmt</td>
        <td>String</td>
        <td>카카오페이 매출금액</td>
        <td>-</td>
    </tr>
    </tbody>
</table>
{/*<Button url={"https://devapi.ubcn.co.kr:17881/list/noticeList"} title={"테스트 버튼"}/>*/}