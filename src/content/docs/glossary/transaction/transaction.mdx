---
layout: /src/layouts/glossary/Layout.astro
title: 거래
---
import Frame from "/src/components/Frame.astro";

<Frame>

    ## 거래란?

    `거래`는 **결제 한 건에서 발생하는 개별 처리 단위**를 의미해요.

    유비씨엔 전산에서는 **결제 승인과 결제 취소를 각각 하나의 거래로 관리**하고 있어요.

    하나의 결제 건은

    - 승인 거래 1건 - 취소 거래 1건

    처럼 **여러 거래 이력**을 가질 수 있어요.

</Frame>
<Frame>

    ## 결제 승인

    결제 요청이 정상적으로 처리되었을 때 발생하는 거래를 **결제 승인**이라고 해요.

    - 머신기에 장착된 결제 단말기를 통해 결제가 요청돼요. - 카드 결제의 경우 고객의 결제수단(신용카드, 체크카드 등)에 결제 가능한 금액이 있는지 확인해요. - 승인된 거래는 해당 금액에 대해 **가맹점으로의 대금 지급이 예정된 상태**를 의미해요.

</Frame>

<Frame>

    ## 결제 취소

    이미 승인된 거래이거나,

    승인 처리 중 오류가 발생한 거래를 되돌리는 처리를 **결제 취소**라고 해요.

    전산에서는 결제 취소를

    **취소가 발생한 시점과 처리 단계에 따라 `망상취소`, `승인취소`, `매입취소`로 구분**해요.

</Frame>

<Frame>

    ### 망상취소란?

    `망상취소`는 **결제 승인 요청 중 통신 장애로 인해 승인 결과를 정상적으로 수신하지 못한 경우 발생하는 취소**를 의미해요.

    - 머신기 → PG/VAN → 카드사로 승인 요청 전송 - 통신 오류, 타임아웃 등으로 승인 응답 미수신

    이 경우

    - 실제 카드사 승인 여부를 확정할 수 없기 때문에 - **중복 승인 및 과금 방지를 위해 자동 취소 처리**가 이루어져요.

    👉 망상취소의 특징

    - 카드사 승인 이력이 남지 않는 것이 일반적 - 고객 결제수단에 청구 또는 환불 내역이 발생하지 않음 - 전산에서는 **취소 거래로 기록되지만 정산 대상은 아니므로 표기하지 않음**

</Frame>

<Frame>

    ### 승인취소란?

    `승인취소`는 **카드 결제가 승인된 직후, 매입이 이루어지기 전에 취소되는 거래**를 의미해요.

    - 결제 승인 후 - 카드사 매입 처리 이전에 취소된 경우

    이 경우

    - 카드사에 매입 데이터가 전달되지 않으며 - 고객의 결제수단에는 **승인 자체가 없었던 것처럼 처리**돼요. (결제수단으로 재입금)

    👉 주로 아래 상황에서 발생해요.

    - 머신기 상품 미투출 - 결제 직후 오류 감지 - 즉시 취소 처리된 결제

</Frame>

<Frame>

    ### 매입취소란?

    `매입취소`는 **이미 카드사에 매입된 거래를 취소하는 경우**를 의미해요.

    VAN가맹점은 승인취소 밖에 존재하지 않아 해당하지 않고, `PG사` 또는 `간편결제사` 가맹점에서만 발생해요.

    - 결제 승인 완료 - 카드사 매입 완료 이후에 취소된 경우

    이 경우

    - 카드사에 취소 매입 데이터가 전달되고 - 고객의 결제수단에는 **환불 내역으로 처리**돼요.

    👉 주로 아래 상황에서 발생해요.

    - 승인 후 매입 또는 정산대금 입금 이후, 일정 시간이 지난 뒤 취소한 경우, - 정산 대상에 포함된 결제의 취소

</Frame>

<Frame>

    ## 망상취소 · 승인취소 · 매입취소 비교

    | 구분 | 망상취소 | 승인취소 | 매입취소 | | --- | --- | --- | --- | | 발생 시점 | 승인 요청 중 | 승인 후 / 매입 전 | 매입 후 | | 승인 응답 | 미수신 | 수신 | 수신 | | 카드사 승인 | 불확정 | 무효 처리 | 유효 후 취소 | | 고객 청구 | 없음 | 없음 | 환불 | | 매입 데이터 | 없음 | 없음 | 있음 | | 정산 영향 | 없음 | 없음 | 있음(차감) | | 전산 관리 포인트 | 통신 오류 관리 | 승인 이력 관리 | 정산·환불 관리 |

</Frame>

<Frame>

    ## 거래와 결제의 관계

    - 결제는 **승인 행위 자체**를 의미해요. - 거래는 결제 승인과 결제 취소를 포함한

    **모든 처리 이력**을 의미해요.


    따라서

    - 모든 결제는 거래에 포함되지만 - 결제 취소 역시 하나의 거래로 관리돼요.

</Frame>

<Frame>

    ## 거래 기록이 중요한 이유

    결제 취소는 **어떤 단계에서 취소되었는지에 따라 자금 흐름과 정산 영향이 완전히 달라져요.**

    - 망상취소를 승인취소로 오인하면 불필요한 승인/취소 로직이 중복될 수 있고 - 승인취소와 매입취소가 구분되지 않으면 정산 금액 오류가 발생할 수 있어요.

    👉 따라서 전산에서는 취소 유형을 명확히 구분해 거래로 관리해요.

</Frame>

<Frame>

    ## 거래 대사란

    `거래 대사`란?

    **전산 거래 기록과 카드사 매입·정산 내역을 비교하여 오류를 확인하는 작업**이에요.

    - 망상취소·승인취소 거래는

    카드사 매입 내역에 존재하지 않아야 해요.

    - 매입취소 거래는

    매입 및 취소 이력이 정확히 일치해야 해요.


    전산에서는 이러한 정보를

    **웹 화면 형태로 제공**해 운영자가 쉽게 확인할 수 있어요.

</Frame>

<Frame>

    ## 정리

    - 결제 취소는 **망상취소 / 승인취소 / 매입취소** 로 구분 - 취소 시점에 따라 **표기 및 정산 영향이 완전히 다름**

</Frame>